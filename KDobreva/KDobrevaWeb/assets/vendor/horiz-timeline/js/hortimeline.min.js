jQuery(document).ready(function(a){function d(b){b.each(function(){var b=a(this),d={};d.timelineWrapper=b.find(".events-wrapper"),d.eventsWrapper=d.timelineWrapper.children(".events"),d.fillingLine=d.eventsWrapper.children(".filling-line"),d.timelineEvents=d.eventsWrapper.find("a"),d.timelineDates=p(d.timelineEvents),d.eventsMinLapse=r(d.timelineDates),d.timelineNavigation=b.find(".cd-timeline-navigation"),d.eventsContent=b.children(".events-content"),j(d,c);var g=k(d,c);b.addClass("loaded"),d.timelineNavigation.on("click",".next",function(a){a.preventDefault(),e(d,g,"next")}),d.timelineNavigation.on("click",".prev",function(a){a.preventDefault(),e(d,g,"prev")}),d.eventsWrapper.on("click","a",function(b){b.preventDefault(),d.timelineEvents.removeClass("selected"),a(this).addClass("selected"),m(a(this)),i(a(this),d.fillingLine,g),l(a(this),d.eventsContent)}),d.eventsContent.on("swipeleft",function(){var a=t();"mobile"==a&&f(d,g,"next")}),d.eventsContent.on("swiperight",function(){var a=t();"mobile"==a&&f(d,g,"prev")}),a(document).keyup(function(a){"37"==a.which&&s(b.get(0))?f(d,g,"prev"):"39"==a.which&&s(b.get(0))&&f(d,g,"next")})})}function e(a,b,d){var e=n(a.eventsWrapper),f=Number(a.timelineWrapper.css("width").replace("px",""));"next"==d?h(a,e-f+c,f-b):h(a,e+f-c)}function f(a,b,c){var d=a.eventsContent.find(".selected"),e="next"==c?d.next():d.prev();if(e.length>0){var f=a.eventsWrapper.find(".selected"),h="next"==c?f.parent("li").next("li").children("a"):f.parent("li").prev("li").children("a");i(h,a.fillingLine,b),l(h,a.eventsContent),h.addClass("selected"),f.removeClass("selected"),m(h),g(c,h,a)}}function g(a,b,c){var d=window.getComputedStyle(b.get(0),null),e=Number(d.getPropertyValue("left").replace("px","")),f=Number(c.timelineWrapper.css("width").replace("px","")),g=Number(c.eventsWrapper.css("width").replace("px","")),i=n(c.eventsWrapper);("next"==a&&e>f-i||"prev"==a&&e<-i)&&h(c,-e+f/2,f-g)}function h(a,b,c){var d=a.eventsWrapper.get(0);b=b>0?0:b,b="undefined"!==typeof c&&b<c?c:b,o(d,"translateX",b+"px"),0==b?a.timelineNavigation.find(".prev").addClass("inactive"):a.timelineNavigation.find(".prev").removeClass("inactive"),b==c?a.timelineNavigation.find(".next").addClass("inactive"):a.timelineNavigation.find(".next").removeClass("inactive")}function i(a,b,c){var d=window.getComputedStyle(a.get(0),null),e=d.getPropertyValue("left"),f=d.getPropertyValue("width");e=Number(e.replace("px",""))+Number(f.replace("px",""))/2;var g=e/c;o(b.get(0),"scaleX",g)}function j(a,b){for(var c=0;c<a.timelineDates.length;c++){var d=q(a.timelineDates[0],a.timelineDates[c]),e=Math.round(d/a.eventsMinLapse)+2;a.timelineEvents.eq(c).css("left",e*b+"px")}}function k(a,b){var c=q(a.timelineDates[0],a.timelineDates[a.timelineDates.length-1]),d=c/a.eventsMinLapse,d=Math.round(d)+4,e=d*b;return a.eventsWrapper.css("width",e+"px"),i(a.eventsWrapper.find("a.selected"),a.fillingLine,e),g("next",a.eventsWrapper.find("a.selected"),a),e}function l(a,b){var c=a.data("date"),d=b.find(".selected"),e=b.find('[data-date="'+c+'"]'),f=e.height();if(e.index()>d.index())var g="selected enter-right",h="leave-left";else var g="selected enter-left",h="leave-right";e.attr("class",g),d.attr("class",h).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){d.removeClass("leave-right leave-left"),e.removeClass("enter-left enter-right")}),b.css("height",f+"px")}function m(a){a.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function n(a){var b=window.getComputedStyle(a.get(0),null),c=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform");if(c.indexOf("(")>=0){var c=c.split("(")[1];c=c.split(")")[0],c=c.split(",");var d=c[4]}else var d=0;return Number(d)}function o(a,b,c){a.style["-webkit-transform"]=b+"("+c+")",a.style["-moz-transform"]=b+"("+c+")",a.style["-ms-transform"]=b+"("+c+")",a.style["-o-transform"]=b+"("+c+")",a.style.transform=b+"("+c+")"}function p(b){var c=[];return b.each(function(){var b=a(this),d=b.data("date").split("T");if(d.length>1)var e=d[0].split("/"),f=d[1].split(":");else if(d[0].indexOf(":")>=0)var e=["2000","0","0"],f=d[0].split(":");else var e=d[0].split("/"),f=["0","0"];var g=new Date(e[2],e[1]-1,e[0],f[0],f[1]);c.push(g)}),c}function q(a,b){return Math.round(b-a)}function r(a){for(var b=[],c=1;c<a.length;c++){var d=q(a[c-1],a[c]);b.push(d)}return Math.min.apply(null,b)}function s(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b<window.pageYOffset+window.innerHeight&&c<window.pageXOffset+window.innerWidth&&b+e>window.pageYOffset&&c+d>window.pageXOffset}function t(){return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}var b=a(".cd-horizontal-timeline"),c=60;b.length>0&&d(b)});